<html>

<head>
    <title>Job Application Form</title>
</head>

<style>
    table,
    th,
    td {
        border: 1px solid black;
    }

    h6 {
        font-size: 7px;
    }

    #plus,
    #minus {
        cursor: pointer;
    }

    #change {
        display: flex;
    }

    .hidden {
        display: none;
    }

    .visible {
        display: block;
    }
</style>


<script>

    var currentsection = 0;
    var sec = document.getElementsByClassName('tab');
    console.log(sec);
    var nextbut = document.getElementById('nextbtn');
    function next() {
        sec[currentsection].classList.add('hidden');
        sec[currentsection].classList.remove('visible');

        currentsection++;
        if (currentsection < sec.length) {
            sec[currentsection].classList.remove('hidden');
            sec[currentsection].classList.add('visible');
        } else {
            currentsection = 0;
            sec[currentsection].classList.add('hidden');
            sec[currentsection].classList.remove('visible');
        }
        // if(currentsection=== sec.length-1)
        // {

        // }
    }

    // var sec1 = document.getElementsByClassName('tab');
    // console.log(sec1);
    // var prevbut = document.getElementsById('prevbtn');
    function prev() {
        sec[currentsection].classList.add('hidden');
        sec[currentsection].classList.remove('visible');

        currentsection--;
        if (currentsection >= 0) {
            sec[currentsection].classList.remove('hidden');
            sec[currentsection].classList.add('visible');
        } else {
            currentsection = sec.length - 1;
            sec[currentsection].classList.remove('hidden');
            sec[currentsection].classList.add('visible');
        }
        if (currentsection === 0) {
            prevbtn.style.display = 'none';
        } else {
            prevbtn.style.display = 'block';
        }
        if (currentsection === (sec.length - 1)) {
            prevbtn.style.display = 'none';

        } else {
            prevbtn.style.display = 'block';
        }
    }


    reference = 2;
    preference = 2;
    experience = 2;
    education = 2;

    function add() {
        row = document.getElementsByClassName("row")[0];
        row.innerHTML += `
        <table>
        
        <tr>
            <td><label for="name">Name</label></td>
            <td><input type="text" id="name" name="name" value=""><br></td>

            <td><label for="contact">Contact No</label></td>
            <td><input type="text" id="contact" name="contact" value=""><br></td>

            <td><label for="relation">Relation</label></td>
            <td><input type="text" id="relation" name="relation" value=""><br></td>
        </tr>

   
    </table>
        `;
        reference++;
    }

    function refm() {
        if (reference > 2) {
            row = document.getElementsByClassName("row");
            row[0].removeChild(row[0].lastElementChild);
            reference--;
            console.log(row);
        }
    }



    function add_pre() {
        row1 = document.getElementsByClassName("row1")[0];
        row1.innerHTML += `
        <table>

            <tr>
                <td><label for="location">Prefered Location</label></td>
                <td><input type="text" id="location" name="location" value=""><br></td>
            </tr>

            <tr>
                <td><label for=" period">Notice Period</label></td>
                <td><input type="text" id="period" name="period" value=""><br></td>
            </tr>

            <tr>
                <td><label for="expected">Expected CTC</label></td>
                <td><input type="text" id="expected" name="expected" value=""><br></td>
            </tr>

            <tr>
                <td><label for="current">Current CTC</label></td>
                <td><input type="text" id="current" name="current" value=""><br></td>
            </tr>
            </table>
        `;
        preference++;
    }
    function minus_pre() {
        if (preference > 2) {
            row1 = document.getElementsByClassName("row1");
            row1[0].removeChild(row1[0].lastElementChild);
            preference--;
            console.log(row1);
        }
    }



    function add_work() {
        row2 = document.getElementsByClassName("row2")[0];
        row2.innerHTML += `
        <table>
                <tr>
                    <td><label for="company1">Company Name</label></td>
                    <td><input type="text" id="company1" name="company1" value=""><br></td>

                    <td><label for="designation">Designation</label></td>
                    <td><input type="text" id="designation" name="designation" value=""><br></td>

                    <td><label for="fromdate">From date</label></td>
                    <td><input type="text" id="fromdate" name="fromdate" value=""><br></td>

                    <td><label for="fromdate">to date</label></td>
                    <td><input type="text" id="todate" name="todate" value=""><br></td>
                </tr>
            </table>
        `;
        experience++;
    }


    function minus_work() {
        if (experience > 2) {
            row2 = document.getElementsByClassName("row2");
            row2[0].removeChild(row2[0].lastElementChild);
            experience--;
            console.log(row2);
        }
    }


    function add_edu() {
        row3 = document.getElementsByClassName("row3")[0];
        row3.innerHTML += `
        <table>
                        <tr>
                            <td><label for="edutype">Education type</label></td>
                            <td>
                                <select name="edutype[]">
                                    <option value="SSC" name="SSC">SSC</option>
                                    <option value="HSC" name="HSC">HSC</option>
                                    <option value="bachelor" name="bachelor">bachelor</option>
                                    <option value="master" name="master">master</option>
                                </select>
                            </td>

                            <td><label for="board1">Name Of Board</label></td>
                            <td><input type="text" id="board1" name="board1[]" value=""><br>
                                <h6 id="name"></h6>
                            </td>



                            <td><label for="passingyear1">Passing Year</label></td>
                            <td><input type="text" id="passingyear1" name="passingyear1[]" value=""><br>
                                <h6 id="py1"></h6>
                            </td>

                            <td><label for="percentage1">Percentage</label></td>
                            <td><input type="text" id="percentage1" name="percentage1[]" value=""><br>
                                <h6 id="per1"></h6>

                            </td>
                        </tr>
                    </table>
        `;
        education++;
    }

    function minus_edu() {
        if (education > 2) {
            row3 = document.getElementsByClassName("row3");
            row3[0].removeChild(row3[0].lastElementChild);
            education--;
            console.log(row3);
        }
    }






    async function submitdata() {
        let dataform = document.getElementById("myform");
        let data3 = new FormData(dataform);
        const params = new URLSearchParams(data3);
        const jobdata = await new Response(params).text();
        console.log(typeof (jobdata));

        console.log("insert data");

        let data5 = await fetch("http://localhost:3045/record", {
            method: "POST",
            headers: {
                'content-type': "application/x-www-form-urlencoded"
            },
            body: jobdata
        })
    }

    function validForm() {



        let firstname = document.querySelector("#firstname").value;
        console.log(firstname);
        var a = document.getElementById('fname');
        if (firstname == "") {
            fname.innerHTML = "<p>required</p>";
            return false;
        }
        else if (!/^[A-Za-z]+$/.test(firstname)) {
            fname.innerHTML = "<p>not valid</p>";
            return false;
        }


        let last = document.querySelector("#last").value;
        console.log(last);
        var b = document.getElementById('lname');
        if (last == "") {
            lname.innerHTML = "<p>required</p>";
            return false;
        }
        else if (!/^[A-Za-z]+$/.test(last)) {
            lname.innerHTML = "<p>not valid</p>";
            return false;
        }


        let designation = document.querySelector("#designation").value;
        console.log(designation);
        var c = document.getElementById('degn');
        if (designation == "") {
            degn.innerHTML = "<p>required</p>";
            return false;
        }

        let mailID = document.querySelector("#mailID").value;
        console.log(mailID);
        var d = document.getElementById('mail');
        if (mailID == "") {
            mail.innerHTML = "<p>required</p>";
            return false;
        }
        else if (!/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i
            .test(mailID)) {
            mail.innerHTML = "<p>not valid</p>";
            return false;
        }


        let address1 = document.querySelector("#address1").value;
        console.log(address1);
        var e = document.getElementById('add');
        if (address1 == "") {
            add.innerHTML = "<p>required</p>";
            return false;
        }



        let address2 = document.querySelector("#address2").value;
        console.log(address2);
        var f = document.getElementById('add2');
        if (address2 == "") {
            add2.innerHTML = "<p>required</p>";
            return false;
        }


        let ContactNo = document.querySelector("#ContactNo").value;
        console.log(ContactNo);
        var g = document.getElementById('no');
        if (ContactNo == "") {
            no.innerHTML = "<p>required</p>";
            return false;
        }
        else if (!/^\(?([0-9]{3})\)?([0-9]{3})?([0-9]{4})$/.test(ContactNo)) {
            no.innerHTML = "<p>not valid</p>";
            return false;
        }


        let city = document.querySelector("#city").value;
        console.log(city);
        var h = document.getElementById('cy');
        if (city == "") {
            cy.innerHTML = "<p>required</p>";
            return false;
        }

        var gender = document.querySelectorAll('input[name="gender"]:checked');
        var i = document.getElementById('gr');
        if (!gender.length) {
            gr.innerHTML = "<p>You must select male or female</p>";
            return false;
        }

        let zipcode = document.querySelector("#zipcode").value;
        console.log(zipcode);
        var j = document.getElementById('code');
        if (zipcode == "") {
            code.innerHTML = "<p>required</p>";
            return false;
        }
        else if (!/^\d{6}$/.test(zipcode)) {
            code.innerHTML = "<p>not valid</p>";
            return false;
        }


        let DOB = document.querySelector("#DOB").value;
        console.log(DOB);
        var k = document.getElementById('bdate');
        if (DOB == "") {
            bdate.innerHTML = "<p>required</p>";
            return false;
        }
        // else if (!/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/.test(DOB)) {
        //     bdate.innerHTML = "<p>not valid</p>";
        //     return false;
        // }
        



        // let NOB = document.querySelector("#NOB").value;
        // console.log(NOB);
        // var l = document.getElementById('name');
        // if (NOB == "") {
        //     l.innerHTML = "<p>required</p>";
        //     return false;
        // }

        // let py = document.querySelector("#py").value;
        // console.log(py);
        // var l = document.getElementById('py1');
        // if (py == "") {
        //     l.innerHTML = "<p>required</p>";
        //     return false;
        // }

        // let per = document.querySelector("#per").value;
        // console.log(per);
        // var m = document.getElementById('per1');
        // if (per == "") {
        //     m.innerHTML = "<p>required</p>";
        //     return false;
        // }


        // let NOB1 = document.querySelector("#NOB1").value;
        // console.log(NOB1);
        // var n = document.getElementById('name1');
        // if (NOB1 == "") {
        //     n.innerHTML = "<p>required</p>";
        //     return false;
        // }

        // let passing = document.querySelector("#passing").value;
        // console.log(passing);
        // var o = document.getElementById('year');
        // if (passing == "") {
        //     o.innerHTML = "<p>required</p>";
        //     return false;
        // }

        // let pr = document.querySelector("#pr").value;
        // console.log(pr);
        // var p = document.getElementById('pt');
        // if (pr == "") {
        //     p.innerHTML = "<p>required</p>";
        //     return false;
        // }


        // let CourseName = document.querySelector("#CourseName").value;
        // console.log(CourseName);
        // var q = document.getElementById('cn');
        // if (CourseName == "") {
        //     q.innerHTML = "<p>required</p>";
        //     return false;
        // }
        // else if (!/^[A-Za-z]+$/.test(CourseName)) {
        //     cn.innerHTML = "<p>not valid</p>";
        //     return false;
        // }

        // let University = document.querySelector("#University").value;
        // console.log(University);
        // var r = document.getElementById('uy');
        // if (University == "") {
        //     r.innerHTML = "<p>required</p>";
        //     return false;
        // }
        // else if (!/^[A-Za-z]+$/.test(University)) {
        //     uy.innerHTML = "<p>not valid</p>";
        //     return false;
        // }



        // let pass = document.querySelector("#pass").value;
        // console.log(pass);
        // var s = document.getElementById('pass1');
        // if (pass == "") {
        //     s.innerHTML = "<p>required</p>";
        //     return false;
        // }
        // else if (/^d{4}$/.test(pass)) {
        //     s.innerHTML = "<p>not valid</p>";
        //     return false;
        // }

        // let perc = document.querySelector("#perc").value;
        // console.log(perc);
        // var t = document.getElementById('perc1');
        // if (perc == "") {
        //     t.innerHTML = "<p>required</p>";
        //     return false;
        // }
// return true;
    }
</script>

<body>
    <h1>
        <center>Job Application Form</center>
    </h1><br>
    <hr><br>
    <form action="/record3" onsubmit=" validForm()" method="post" id="myform">

        <div class="tab visible">
            <h2>Basic Detail</h2><br>
            <table>
                <tr>
                    <td><label for="firstname">First Name</label></td>
                    <td><input type="text" id="firstname" name="firstname" value=""><br>
                        <h6 id="fname"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="last">Last Name</label></td>
                    <td><input type="text" id="last" name="lastname" value=""><br>
                        <h6 id="lname"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="designation1">Designation</label></td>
                    <td><input type="text" id="designation1" name="designation1" value=""><br>
                        <h6 id="degn"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="mailID">E-mail</label></td>
                    <td><input type="text" id="mailID" name="email" value=""><br>
                        <h6 id="mail"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="address1">Address 1</label></td>
                    <td><input type="text" id="address1" name="address_1" value=""><br>
                        <h6 id="add"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="address2">Address 2</label></td>
                    <td><input type="text" id="address2" name="address_2" value=""><br>
                        <h6 id="add2"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="ContactNo">Contact No</label></td>
                    <td><input type="text" id="ContactNo" name="no" value=""><br>
                        <h6 id="no"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="city">City</label></td>
                    <td><input type="text" id="city" name="City" value=""><br>
                        <h6 id="cy"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="state">State</label></td>
                    <td>
                        <select name="state" id="State">
                            <option value="Gujarat">Gujarat</option>
                            <option value="Kerla">Kerla</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td><label for="Gender">Gender</label></td>
                    <td>
                        <input name="Gender" type="radio" value="m"> Male <h6 id="gr"></h6>
                        <input name="Gender" type="radio" value="f"> Female <h6 id="gr"></h6>
                    </td>
                </tr>

                <tr>
                    <td><label for="zipcode">Zipcode</label></td>
                    <td><input type="text" id="zipcode" name="Zipcode" value=""><br>
                        <h6 id="code"></h6>
                    </td>
                </tr>



                <tr>
                    <td><label for="RelationshipStatus">Relationship Status</label></td>
                    <td>
                        <select name="relationshipStatus" id="status1">
                            <option value="Single" name="Single">Single</option>
                            <option value="Married" name="Married">Married</option><br><br>
                        </select>
                    </td>
                </tr>

                <tr>
                    <td><label for="DOB">Date Of Birth</label></td>
                    <td><input type="text" id="DOB" name="date" value=""><br>
                        <h6 id="bdate"></h6>
                    </td>
                </tr>
            </table>
        </div><br><br><br>


        <div class="tab hidden">
            <div class="education">
                <h2>Education Detail</h2>

                <input type="button" id="plus" value="+" onclick="add_edu()">
                <input type="button" id="minus" value="-" onclick="minus_edu()">


                <div class="row3">
                    <table>
                        <tr>
                            <input type="hidden" name="edu_id" value="">
                            <td><label for="edutype">Education type</label></td>
                            <td>
                                <select name="edutype[]">
                                    <option value="SSC" name="SSC">SSC</option>
                                    <option value="HSC" name="HSC">HSC</option>
                                    <option value="bachelor" name="bachelor">bachelor</option>
                                    <option value="master" name="master">master</option>
                                </select>
                            </td>

                            <td><label for="board1">Name Of Board</label></td>
                            <td><input type="text" id="board1" name="board1[]" value=""><br>
                                <h6 id="name"></h6>
                            </td>



                            <td><label for="passingyear1">Passing Year</label></td>
                            <td><input type="text" id="passingyear1" name="passingyear1[]" value=""><br>
                                <h6 id="py1"></h6>
                            </td>

                            <td><label for="percentage1">Percentage</label></td>
                            <td><input type="text" id="percentage1" name="percentage1[]" value=""><br>
                                <h6 id="per1"></h6>

                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div><br><br>



        <div class="tab hidden">
            <table>

                <div class="experience">
                    <h2>Work Experience</h2>

                    <input type="button" id="plus" value="+" onclick="add_work()">
                    <input type="button" id="minus" value="-" onclick="minus_work()">

                    <div class="row2">
                        <table>
                            <tr>
                                <td><label for="company1">Company Name</label></td>
                                <td><input type="text" id="company1" name="company1[]" value=""><br></td>

                                <td><label for="designation">Designation</label></td>
                                <td><input type="text" id="designation" name="designation[]" value=""><br></td>

                                <td><label for="fromdate">From date</label></td>
                                <td><input type="text" id="fromdate" name="fromdate[]" value=""><br></td>

                                <td><label for="fromdate">to date</label></td>
                                <td><input type="text" id="todate" name="todate[]" value=""><br></td>
                            </tr>
                        </table>
                    </div>
                </div>
        </div><br><br><br>


        <div class="tab hidden">
            <h2>Language Known</h2>
            <table>

                <tr>
                    <td><label for="hindi">Hindi</label></td>
                    <td><input type="checkbox" id="hindi" name="hindi"></td>

                    <td><label for="Read">Read</label></td>
                    <td><input type="radio" id="read" name="readh"></td>

                    <td><label for="write">Write</label></td>
                    <td><input type="radio" id="write" name="writeh"></td>

                    <td><label for="speak">Speak</label></td>
                    <td><input type="radio" id="speak" name="speakh"><br><br></td>
                </tr>


                <tr>
                    <td><label for="english">English</label></td>
                    <td><input type="checkbox" id="english" name="english"></td>

                    <td><label for="Read">Read</label></td>
                    <td><input type="radio" id="read" name="reade"></td>

                    <td><label for="write">Write</label></td>
                    <td><input type="radio" id="write" name="writee"></td>

                    <td><label for="speak">Speak</label></td>
                    <td><input type="radio" id="speak" name="speake"><br><br></td>
                </tr>


                <tr>
                    <td><label for="gujarati">Gujarati</label></td>
                    <td><input type="checkbox" id="gujarati" name="gujarati"></td>

                    <td><label for="Read">Read</label></td>
                    <td><input type="radio" id="read" name="readg"></td>

                    <td><label for="write">Write</label></td>
                    <td><input type="radio" id="write" name="writeg"></td>

                    <td><label for="speak">Speak</label></td>
                    <td><input type="radio" id="speak" name="speakg"><br><br></td>
                </tr>
            </table>
        </div><br><br><br>

        <div class="tab hidden">
            <h2>Technology You Know</h2>
            <table>
                <tr>
                    <td><label for="php">php</label></td>
                    <td><input type="checkbox" id="php" name="php"></td>

                    <td><label for="beginer">Beginer</label></td>
                    <td><input type="radio" id="beginer" name="tech_php" value="beginer"></td>

                    <td><label for="mediator">Mediator</label></td>
                    <td><input type="radio" id="mediator" name="tech_php" value="mediator"></td>

                    <td><label for="expert">Expert</label></td>
                    <td><input type="radio" id="expert" name="tech_php" value="expert"></td>
                </tr>
                <tr>
                    <td><label for="mySQL">mySQL</label></td>
                    <td><input type="checkbox" id="mySQL" name="mySQL"></td>

                    <td><label for="beginer">Beginer</label></td>
                    <td><input type="radio" id="beginer" name="tech_mySQL" value="beginer"></td>

                    <td><label for="mediator">Mediator</label></td>
                    <td><input type="radio" id="mediator" name="tech_mySQL" value="mediator"></td>

                    <td><label for="expert">Expert</label></td>
                    <td><input type="radio" id="expert" name="tech_mySQL" value="expert"></td>
                </tr>
                <tr>
                    <td><label for="laravel">laravel</label></td>
                    <td><input type="checkbox" id="laravel" name="laravel"></td>

                    <td><label for="beginer">Beginer</label></td>
                    <td><input type="radio" id="beginer" name="tech_laravel" value="beginer"> </td>

                    <td><label for="mediator">Mediator</label></td>
                    <td><input type="radio" id="mediator" name="tech_laravel" value="mediator"></td>

                    <td><label for="expert">Expert</label></td>
                    <td><input type="radio" id="expert" name="tech_laravel" value="expert"></td>
                </tr>
                <tr>
                    <td><label for="oracle">oracle</label></td>
                    <td><input type="checkbox" id="oracle" name="oracle"></td>

                    <td><label for="beginer">Beginer</label></td>
                    <td><input type="radio" id="beginer" name="tech_oracle" value="beginer"></td>

                    <td><label for="mediator">Mediator</label></td>
                    <td><input type="radio" id="mediator" name="tech_oracle" value="mediator"></td>

                    <td><label for="expert">Expert</label></td>
                    <td><input type="radio" id="expert" name="tech_oracle" value="expert"></td>
                </tr>
            </table>
        </div><br><br><br>

        <div class="tab hidden">
            <div class="reference">
                <h2>Reference Contact</h2>


                <input type="button" id="plus" value="+" onclick="add()">
                <input type="button" id="minus" value="-" onclick="refm()">

                <div class="row">
                    <table>

                        <tr>
                            <td><label for="name">Name</label></td>
                            <td><input type="text" id="name" name="name1[]" value=""><br></td>

                            <td><label for="contact">Contact No</label></td>
                            <td><input type="text" id="contact" name="contact[]" value=""><br></td>

                            <td><label for="relation">Relation</label></td>
                            <td><input type="text" id="relation" name="relation[]" value=""><br></td>
                        </tr>
                    </table>
                </div><br><br><br>
            </div>
        </div>



        <div class="tab hidden">
            <div class="preference">
                <h2>Preference</h2>

                <input type="button" id="plus" value="+" onclick="add_pre()">
                <input type="button" id="minus" value="-" onclick="minus_pre()">

                <div class="row1">
                    <table>

                        <tr>
                            <td><label for="location">Prefered Location</label></td>
                            <td><input type="text" id="location" name="location[]" value=""><br></td>
                        </tr>

                        <tr>
                            <td><label for=" period">Notice Period</label></td>
                            <td><input type="text" id="period" name="period[]" value=""><br></td>
                        </tr>

                        <tr>
                            <td><label for="expected">Expected CTC</label></td>
                            <td><input type="text" id="expected" name="expected[]" value=""><br></td>
                        </tr>

                        <tr>
                            <td><label for="current">Current CTC</label></td>
                            <td><input type="text" id="current" name="current[]" value=""><br></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        <tr>
            <td><input type="button" id="submit" name="submit" value="submit" onclick="submitdata()"></td>
        </tr><br><br><br>

        <tr>
            <td>
                <div id="change">
                    <input type="button" id="prevbtn" value="PREVIOUS" onclick="prev()">
                    <input type="button" id="nextbtn" value="NEXT" style="margin-left: 900px;" onclick="next()">

                </div>
            </td>
        </tr>
    </form>
</body>

</html>